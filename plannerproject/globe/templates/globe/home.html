<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WanderMate - Your Travel Companion</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://unpkg.com/globe.gl"></script>
  <script src="https://unpkg.com/topojson@3"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <style>
    :root {
      --primary-color: #6366f1;
      --secondary-color: #8b5cf6;
      --accent-color: #06b6d4;
      --success-color: #10b981;
      --warning-color: #f59e0b;
      --danger-color: #ef4444;
      --dark-bg: #0f172a;
      --dark-card: #1e293b;
      --dark-border: #334155;
      --text-primary: #f1f5f9;
      --text-secondary: #cbd5e1;
      --text-muted: #94a3b8;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
      min-height: 100vh;
      color: var(--text-primary);
      overflow-x: hidden;
    }

    /* Navbar */
    .navbar {
      position: sticky;
      top: 0;
      z-index: 100;
      padding: 1rem 0;
      background: rgba(15, 23, 42, 0.8);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--dark-border);
    }

    .nav-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-size: 1.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .brand i {
      background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-size: 2rem;
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 2rem;
    }

    .nav-link {
      color: var(--text-secondary);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s;
    }

    .nav-link:hover {
      color: var(--accent-color);
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.3s, box-shadow 0.3s;
      text-decoration: none;
      display: inline-block;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(99, 102, 241, 0.4);
    }

    /* Hero Section */
    .hero {
      max-width: 1400px;
      margin: 3rem auto;
      padding: 0 2rem;
      text-align: center;
    }

    .hero h1 {
      font-size: 3.5rem;
      font-weight: 700;
      margin-bottom: 1rem;
      background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .hero p {
      font-size: 1.25rem;
      color: var(--text-secondary);
      margin-bottom: 2rem;
    }

    /* Search Form */
    .search-card {
      background: var(--dark-card);
      border: 1px solid var(--dark-border);
      border-radius: 20px;
      padding: 2rem;
      margin: 2rem auto;
      max-width: 1000px;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
    }

    .search-form {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1rem;
      align-items: end;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .form-group label {
      color: var(--text-secondary);
      font-weight: 500;
      font-size: 0.9rem;
    }

    .input-wrapper {
      position: relative;
    }

    .input-wrapper i {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--accent-color);
    }

    .form-control {
      width: 100%;
      padding: 0.75rem 1rem 0.75rem 3rem;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid var(--dark-border);
      border-radius: 12px;
      color: var(--text-primary);
      font-size: 1rem;
      transition: border-color 0.3s, background 0.3s;
    }

    .form-control:focus {
      outline: none;
      border-color: var(--accent-color);
      background: rgba(255, 255, 255, 0.08);
    }

    .btn-search {
      background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
      color: white;
      border: none;
      padding: 0.75rem 2rem;
      border-radius: 12px;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: transform 0.3s, box-shadow 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .btn-search:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(6, 182, 212, 0.4);
    }

    /* Main Content */
    .main-content {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 2rem 4rem;
    }

    /* Section Titles */
    .section-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin: 3rem 0 1.5rem;
    }

    .section-header h2 {
      font-size: 2rem;
      font-weight: 700;
      color: var(--text-primary);
    }

    .section-header i {
      color: var(--accent-color);
      font-size: 2rem;
    }

    /* Weather Widget */
    .weather-widget {
      background: linear-gradient(135deg, rgba(6, 182, 212, 0.1), rgba(99, 102, 241, 0.1));
      border: 1px solid var(--dark-border);
      border-radius: 20px;
      padding: 2rem;
      margin-bottom: 2rem;
    }

    .weather-current {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 2rem;
      padding: 1.5rem;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 16px;
    }

    .weather-main {
      display: flex;
      align-items: center;
      gap: 2rem;
    }

    .weather-icon-large {
      font-size: 4rem;
      color: var(--accent-color);
    }

    .weather-current-temp {
      font-size: 3.5rem;
      font-weight: 700;
      color: var(--accent-color);
    }

    .weather-current-desc {
      font-size: 1.2rem;
      color: var(--text-secondary);
      text-transform: capitalize;
    }

    .weather-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }

    .weather-item {
      background: rgba(255, 255, 255, 0.05);
      padding: 1.5rem 1rem;
      border-radius: 12px;
      text-align: center;
      transition: transform 0.3s, background 0.3s;
    }

    .weather-item:hover {
      transform: translateY(-5px);
      background: rgba(255, 255, 255, 0.08);
    }

    .weather-item-date {
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-bottom: 0.5rem;
    }

    .weather-item-icon {
      font-size: 2rem;
      margin: 0.5rem 0;
    }

    .weather-temp {
      font-size: 2rem;
      font-weight: 700;
      color: var(--accent-color);
      margin: 0.5rem 0;
    }

    .weather-desc {
      font-size: 0.9rem;
      color: var(--text-secondary);
      text-transform: capitalize;
    }

    /* Flights Section */
    .flights-grid {
      display: grid;
      gap: 1.5rem;
    }

    .flight-card {
      background: var(--dark-card);
      border: 1px solid var(--dark-border);
      border-radius: 16px;
      padding: 1.5rem;
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .flight-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      border-color: var(--accent-color);
    }

    .flight-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--dark-border);
    }

    .airline-info {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .flight-price {
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--success-color);
    }

    .flight-price-label {
      font-size: 0.8rem;
      color: var(--text-muted);
      font-weight: 400;
    }

    .flight-route {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      gap: 1rem;
      align-items: center;
      margin: 1rem 0;
    }

    .airport {
      text-align: center;
    }

    .airport-code {
      font-size: 2rem;
      font-weight: 700;
      color: var(--accent-color);
    }

    .flight-line {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--text-muted);
    }

    .flight-line::before,
    .flight-line::after {
      content: '';
      flex: 1;
      height: 2px;
      background: var(--dark-border);
    }

    .btn-book {
      background: linear-gradient(135deg, var(--success-color), var(--accent-color));
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 1rem;
      width: 100%;
      font-size: 1rem;
    }

    .btn-book:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(16, 185, 129, 0.4);
    }

    .flight-details {
      display: flex;
      justify-content: space-around;
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid var(--dark-border);
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .flight-detail-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* Attractions Grid */
    .attractions-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-top: 1.5rem;
    }

    .attraction-card {
      background: var(--dark-card);
      border: 1px solid var(--dark-border);
      border-radius: 16px;
      overflow: hidden;
      transition: transform 0.3s, box-shadow 0.3s;
      cursor: pointer;
    }

    .attraction-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
      border-color: var(--primary-color);
    }

    .attraction-image {
      width: 100%;
      height: 220px;
      object-fit: cover;
      transition: transform 0.5s;
    }

    .attraction-card:hover .attraction-image {
      transform: scale(1.1);
    }

    .attraction-content {
      padding: 1.5rem;
    }

    .attraction-title {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 0.75rem;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .attraction-rating {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--warning-color);
      margin-bottom: 0.75rem;
    }

    .attraction-address {
      color: var(--text-muted);
      font-size: 0.85rem;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    /* Hotels Section */
    .hotels-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-top: 1.5rem;
    }

    .hotel-card {
      background: var(--dark-card);
      border: 1px solid var(--dark-border);
      border-radius: 16px;
      padding: 2rem;
      transition: transform 0.3s, box-shadow 0.3s;
      text-align: center;
    }

    .hotel-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      border-color: var(--primary-color);
    }

    .hotel-icon {
      font-size: 3rem;
      color: var(--primary-color);
      margin-bottom: 1rem;
    }

    .hotel-name {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 0.5rem;
    }

    .hotel-code {
      color: var(--text-muted);
      font-size: 0.9rem;
    }

    /* Itinerary Section */
    .itinerary-card {
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.05), rgba(139, 92, 246, 0.05));
      border: 1px solid var(--dark-border);
      border-radius: 20px;
      padding: 0;
      margin-top: 1.5rem;
      overflow: hidden;
    }

    .itinerary-day {
      background: var(--dark-card);
      margin: 1.5rem;
      padding: 2rem;
      border-radius: 16px;
      border: 1px solid var(--dark-border);
      transition: all 0.3s;
    }

    .itinerary-day:hover {
      border-color: var(--primary-color);
      transform: translateX(5px);
      box-shadow: 0 5px 20px rgba(99, 102, 241, 0.2);
    }

    .day-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 2px solid var(--dark-border);
    }

    .day-number {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: 700;
      color: white;
      box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
    }

    .day-title {
      flex: 1;
    }

    .day-title h3 {
      color: var(--accent-color);
      font-size: 1.8rem;
      margin: 0;
      font-weight: 700;
    }

    .day-subtitle {
      color: var(--text-muted);
      font-size: 0.9rem;
      margin-top: 0.25rem;
    }

    .time-block {
      background: rgba(255, 255, 255, 0.03);
      border-left: 4px solid var(--accent-color);
      padding: 1.5rem;
      margin: 1rem 0;
      border-radius: 0 12px 12px 0;
      transition: all 0.3s;
    }

    .time-block:hover {
      background: rgba(255, 255, 255, 0.05);
      border-left-color: var(--primary-color);
      transform: translateX(5px);
    }

    .time-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .time-icon {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, rgba(6, 182, 212, 0.2), rgba(99, 102, 241, 0.2));
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      color: var(--accent-color);
    }

    .time-title {
      font-size: 1.3rem;
      font-weight: 600;
      color: var(--primary-color);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .time-content {
      color: var(--text-secondary);
      line-height: 1.8;
      padding-left: 3rem;
    }

    .time-content p {
      margin: 0.75rem 0;
    }

    .time-content strong {
      color: var(--accent-color);
      font-weight: 600;
    }

    .activity-item {
      display: flex;
      align-items: flex-start;
      gap: 1rem;
      margin: 1rem 0;
      padding: 1rem;
      background: rgba(255, 255, 255, 0.02);
      border-radius: 10px;
      transition: background 0.3s;
    }

    .activity-item:hover {
      background: rgba(255, 255, 255, 0.05);
    }

    .activity-bullet {
      min-width: 24px;
      height: 24px;
      background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      color: white;
      font-weight: 700;
      margin-top: 2px;
    }

    .activity-text {
      flex: 1;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    .itinerary-intro {
      padding: 2rem;
      text-align: center;
      background: linear-gradient(135deg, rgba(6, 182, 212, 0.1), rgba(99, 102, 241, 0.1));
      border-bottom: 1px solid var(--dark-border);
    }

    .itinerary-intro h3 {
      color: var(--text-primary);
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }

    .itinerary-intro p {
      color: var(--text-muted);
      font-size: 1rem;
    }

    /* Globe Section */
    #globeViz {
      width: 100%;
      height: 500px;
      border-radius: 20px;
      overflow: hidden;
      margin: 2rem 0;
    }

    /* Cost Estimator */
    .cost-card {
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(6, 182, 212, 0.1));
      border: 1px solid var(--success-color);
      border-radius: 16px;
      padding: 2rem;
      margin: 2rem 0;
      text-align: center;
    }

    .cost-label {
      font-size: 1rem;
      color: var(--text-secondary);
      margin-bottom: 0.5rem;
    }

    .cost-amount {
      font-size: 3rem;
      font-weight: 700;
      color: var(--success-color);
    }

    /* Trip Summary Card */
    .trip-summary {
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
      border: 1px solid var(--primary-color);
      border-radius: 20px;
      padding: 2rem;
      margin: 2rem 0;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 2rem;
    }

    .summary-item {
      text-align: center;
      padding: 1rem;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 12px;
    }

    .summary-icon {
      font-size: 2.5rem;
      color: var(--primary-color);
      margin-bottom: 0.5rem;
    }

    .summary-label {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 0.25rem;
    }

    .summary-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text-primary);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .hero h1 {
        font-size: 2rem;
      }

      .search-form {
        grid-template-columns: 1fr;
      }

      .nav-links {
        display: none;
      }

      .flight-route {
        grid-template-columns: 1fr;
        text-align: center;
      }

      .flight-line {
        transform: rotate(90deg);
      }
    }

    /* Loading Animation */
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Fade-in animation */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .fade-in {
      animation: fadeInUp 0.6s ease-out forwards;
    }

    .trip-summary { animation-delay: 0.1s; }
    .weather-widget { animation-delay: 0.2s; }
    .flights-grid { animation-delay: 0.3s; }
    .hotels-grid { animation-delay: 0.4s; }
    .attractions-grid { animation-delay: 0.5s; }
    .itinerary-card { animation-delay: 0.6s; }

    /* Alert Messages */
    .alert {
      padding: 1rem 1.5rem;
      border-radius: 12px;
      margin: 1rem 0;
    }

    .alert-error {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid var(--danger-color);
      color: var(--danger-color);
    }

    .alert-success {
      background: rgba(16, 185, 129, 0.1);
      border: 1px solid var(--success-color);
      color: var(--success-color);
    }

    /* Print-friendly styles for PDF export */
    @media print {
      body, .itinerary-card, .itinerary-day, .time-block {
        background: white !important;
        color: black !important;
      }
      
      .day-title h3, .time-header, h1, h2, h3 {
        color: #000000 !important;
      }
      
      * {
        color: #000000 !important;
        background: transparent !important;
      }
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="brand">
        <i class="fas fa-globe-americas"></i>
        <span>WanderMate</span>
      </div>
      <div class="nav-links">
        {% if user.is_authenticated %}
          <span class="nav-link">Welcome, {{ user.username }}!</span>
          <a href="{% url 'logout' %}" class="btn-primary">Logout</a>
        {% else %}
          <a href="{% url 'login' %}" class="nav-link">Login</a>
          <a href="{% url 'signup' %}" class="btn-primary">Sign Up</a>
        {% endif %}
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero">
    <h1>‚úàÔ∏è Discover Your Next Adventure</h1>
    <p>Plan your perfect trip with AI-powered itineraries, real-time flights, hotels, attractions, and weather forecasts</p>
    {% if user.is_authenticated %}
    <p style="font-size: 0.9rem; color: var(--text-muted); margin-top: 1rem;">
      <i class="fas fa-sparkles"></i> Welcome back, {{ user.username }}! Ready to explore the world?
    </p>
    {% endif %}
  </section>

  <!-- Search Form -->
  <div class="search-card">
    <form method="POST" class="search-form">
      {% csrf_token %}
      <div class="form-group">
        <label for="source_city">From</label>
        <div class="input-wrapper">
          <i class="fas fa-plane-departure"></i>
          <input type="text" id="source_city" name="source_city" class="form-control" placeholder="Origin city" value="{{ source }}" required>
        </div>
      </div>
      
      <div class="form-group">
        <label for="destination_city">To</label>
        <div class="input-wrapper">
          <i class="fas fa-plane-arrival"></i>
          <input type="text" id="destination_city" name="destination_city" class="form-control" placeholder="Destination city" value="{{ destination }}" required>
        </div>
      </div>
      
      <div class="form-group">
        <label for="departure_date">Departure</label>
        <div class="input-wrapper">
          <i class="fas fa-calendar-alt"></i>
          <input type="date" id="departure_date" name="departure_date" class="form-control" value="{{ departure_date }}">
        </div>
      </div>

      <div class="form-group">
        <label for="return_date">Return</label>
        <div class="input-wrapper">
          <i class="fas fa-calendar-check"></i>
          <input type="date" id="return_date" name="return_date" class="form-control" value="{{ return_date }}" placeholder="Optional">
        </div>
      </div>
      
      <div class="form-group">
        <button type="submit" class="btn-search">
          <i class="fas fa-search"></i>
          <span>Search Trips</span>
        </button>
      </div>
    </form>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    {% if error_message and not flights %}
      <div class="alert alert-error">
        <i class="fas fa-exclamation-circle"></i> {{ error_message }}
      </div>
    {% endif %}

    {% if destination %}
      <!-- Trip Summary Card -->
      <div class="trip-summary fade-in">
        <div class="summary-item">
          <div class="summary-icon"><i class="fas fa-map-marker-alt"></i></div>
          <div class="summary-label">From ‚Üí To</div>
          <div class="summary-value">{{ source }} ‚Üí {{ destination }}</div>
        </div>
        {% if departure_date %}
        <div class="summary-item">
          <div class="summary-icon"><i class="fas fa-calendar-check"></i></div>
          <div class="summary-label">Departure Date</div>
          <div class="summary-value">{{ departure_date }}</div>
        </div>
        {% endif %}
        {% if return_date %}
        <div class="summary-item">
          <div class="summary-icon"><i class="fas fa-calendar-alt"></i></div>
          <div class="summary-label">Return Date</div>
          <div class="summary-value">{{ return_date }}</div>
        </div>
        {% endif %}
        {% if flights %}
        <div class="summary-item">
          <div class="summary-icon"><i class="fas fa-plane-departure"></i></div>
          <div class="summary-label">Available Flights</div>
          <div class="summary-value">{{ flights|length }}</div>
        </div>
        {% endif %}
        {% if attractions %}
        <div class="summary-item">
          <div class="summary-icon"><i class="fas fa-landmark"></i></div>
          <div class="summary-label">Top Attractions</div>
          <div class="summary-value">{{ attractions|length }}</div>
        </div>
        {% endif %}
      </div>

      <!-- Cost Estimator -->
      {% if estimated_cost %}
      <div class="cost-card">
        <div class="cost-label">Estimated Trip Cost (Flight Only)</div>
        <div class="cost-amount">‚Çπ{{ estimated_cost|floatformat:0 }}</div>
        <p style="color: var(--text-muted); margin-top: 0.5rem;">Based on the cheapest flight available</p>
      </div>
      {% endif %}

      <!-- Weather Widget -->
      {% if weather %}
      <div class="weather-widget fade-in">
        <div class="section-header">
          <i class="fas fa-cloud-sun"></i>
          <h2>Weather in {{ weather.city }}</h2>
        </div>
        
        {% if weather.forecast %}
        <!-- Current Weather -->
        <div class="weather-current">
          <div class="weather-main">
            <i class="fas fa-cloud-sun weather-icon-large"></i>
            <div>
              <div class="weather-current-temp">{{ weather.forecast.0.main.temp|floatformat:0 }}¬∞C</div>
              <div class="weather-current-desc">{{ weather.forecast.0.weather.0.description }}</div>
            </div>
          </div>
          <div style="text-align: right; color: var(--text-muted);">
            <div><i class="fas fa-tint"></i> Humidity: {{ weather.forecast.0.main.humidity }}%</div>
            <div><i class="fas fa-wind"></i> Wind: {{ weather.forecast.0.wind.speed }} m/s</div>
          </div>
        </div>

        <!-- Forecast -->
        <h3 style="margin: 1rem 0; color: var(--text-secondary); font-size: 1.1rem;">
          <i class="fas fa-calendar-alt"></i> Upcoming Forecast
        </h3>
        <div class="weather-grid">
          {% for forecast in weather.forecast|slice:"1:5" %}
          <div class="weather-item">
            <div class="weather-item-date">{{ forecast.dt_txt|date:"M d, h A" }}</div>
            <i class="fas fa-cloud-sun weather-item-icon" style="color: var(--accent-color);"></i>
            <div class="weather-temp">{{ forecast.main.temp|floatformat:0 }}¬∞C</div>
            <div class="weather-desc">{{ forecast.weather.0.description }}</div>
          </div>
          {% endfor %}
        </div>
        {% endif %}
      </div>
      {% endif %}

      <!-- Globe Visualization -->
      <div id="globeViz"></div>

      <!-- Outbound Flights Section -->
      <div class="section-header">
        <i class="fas fa-plane-departure"></i>
        <h2>Outbound Flights ({{ source }} ‚Üí {{ destination }})</h2>
      </div>
      {% if flights %}
      <div class="flights-grid fade-in">
        {% for flight in flights %}
        <div class="flight-card">
          <div class="flight-header">
            <div class="airline-info">
              <i class="fas fa-plane" style="color: var(--accent-color); font-size: 1.5rem;"></i>
              <div>
                <div style="font-weight: 600; font-size: 1.1rem;">{{ flight.airline }} {{ flight.flight_number }}</div>
                <div style="font-size: 0.9rem; color: var(--text-muted);">
                  {% if flight.stops == 0 %}<i class="fas fa-check-circle"></i> Direct Flight{% else %}<i class="fas fa-exchange-alt"></i> {{ flight.stops }} Stop{{ flight.stops|pluralize }}{% endif %}
                </div>
              </div>
            </div>
            <div style="text-align: right;">
              <div class="flight-price-label">Price</div>
              <div class="flight-price">‚Çπ{{ flight.price }}</div>
            </div>
          </div>
          
          <div class="flight-route">
            <div class="airport">
              <div class="airport-code">{{ flight.departure_airport }}</div>
              <div style="color: var(--text-muted); font-size: 0.9rem;">
                <i class="far fa-clock"></i> {{ flight.departure_time|slice:"11:16" }}
              </div>
            </div>
            
            <div class="flight-line">
              <i class="fas fa-plane" style="color: var(--accent-color);"></i>
              <span style="font-size: 0.85rem;">{{ flight.duration|slice:"2:" }}</span>
            </div>
            
            <div class="airport">
              <div class="airport-code">{{ flight.arrival_airport }}</div>
              <div style="color: var(--text-muted); font-size: 0.9rem;">
                <i class="far fa-clock"></i> {{ flight.arrival_time|slice:"11:16" }}
              </div>
            </div>
          </div>

          <div class="flight-details">
            <div class="flight-detail-item">
              <i class="fas fa-calendar"></i>
              <span>{{ flight.departure_time|date:"M d, Y" }}</span>
            </div>
            <div class="flight-detail-item">
              <i class="fas fa-suitcase"></i>
              <span>Cabin Bag Included</span>
            </div>
            <div class="flight-detail-item">
              <i class="fas fa-clock"></i>
              <span>{{ flight.duration|slice:"2:" }}</span>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <div class="alert alert-info" style="background: rgba(239, 68, 68, 0.1); border: 1px solid var(--danger-color); color: var(--danger-color); padding: 1rem; border-radius: 12px; margin: 1rem 0;">
        <i class="fas fa-exclamation-circle"></i> No outbound flights found for this route. Try different dates or check if the cities are correct.
      </div>
      {% endif %}

      <!-- Return Flights Section -->
      {% if return_date %}
      <div class="section-header">
        <i class="fas fa-plane-arrival"></i>
        <h2>Return Flights ({{ destination }} ‚Üí {{ source }})</h2>
      </div>
      {% if return_flights %}
      <div class="flights-grid fade-in">
        {% for flight in return_flights %}
        <div class="flight-card">
          <div class="flight-header">
            <div class="airline-info">
              <i class="fas fa-plane" style="color: var(--accent-color); font-size: 1.5rem;"></i>
              <div>
                <div style="font-weight: 600; font-size: 1.1rem;">{{ flight.airline }} {{ flight.flight_number }}</div>
                <div style="font-size: 0.9rem; color: var(--text-muted);">
                  {% if flight.stops == 0 %}<i class="fas fa-check-circle"></i> Direct Flight{% else %}<i class="fas fa-exchange-alt"></i> {{ flight.stops }} Stop{{ flight.stops|pluralize }}{% endif %}
                </div>
              </div>
            </div>
            <div style="text-align: right;">
              <div class="flight-price-label">Price</div>
              <div class="flight-price">‚Çπ{{ flight.price }}</div>
            </div>
          </div>
          
          <div class="flight-route">
            <div class="airport">
              <div class="airport-code">{{ flight.departure_airport }}</div>
              <div style="color: var(--text-muted); font-size: 0.9rem;">
                <i class="far fa-clock"></i> {{ flight.departure_time|slice:"11:16" }}
              </div>
            </div>
            
            <div class="flight-line">
              <i class="fas fa-plane" style="color: var(--accent-color);"></i>
              <span style="font-size: 0.85rem;">{{ flight.duration|slice:"2:" }}</span>
            </div>
            
            <div class="airport">
              <div class="airport-code">{{ flight.arrival_airport }}</div>
              <div style="color: var(--text-muted); font-size: 0.9rem;">
                <i class="far fa-clock"></i> {{ flight.arrival_time|slice:"11:16" }}
              </div>
            </div>
          </div>

          <div class="flight-details">
            <div class="flight-detail-item">
              <i class="fas fa-calendar"></i>
              <span>{{ flight.departure_time|date:"M d, Y" }}</span>
            </div>
            <div class="flight-detail-item">
              <i class="fas fa-suitcase"></i>
              <span>Cabin Bag Included</span>
            </div>
            <div class="flight-detail-item">
              <i class="fas fa-clock"></i>
              <span>{{ flight.duration|slice:"2:" }}</span>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <div class="alert alert-info" style="background: rgba(6, 182, 212, 0.1); border: 1px solid var(--accent-color); color: var(--text-primary); padding: 1rem; border-radius: 12px; margin: 1rem 0;">
        <i class="fas fa-info-circle"></i> No return flights found for {{ return_date }}. You may need to search with different dates or routes.
      </div>
      {% endif %}
      {% endif %}

      <!-- Hotels Section -->
      {% if hotels %}
      <div class="section-header">
        <i class="fas fa-hotel"></i>
        <h2>Recommended Hotels in {{ destination }}</h2>
      </div>
      <div class="hotels-grid fade-in">
        {% for hotel in hotels %}
        <div class="hotel-card">
          <div class="hotel-icon"><i class="fas fa-hotel"></i></div>
          <div class="hotel-name">{{ hotel.name }}</div>
          <div class="hotel-code"><i class="fas fa-map-pin"></i> {{ hotel.iataCode }}</div>
        </div>
        {% endfor %}
      </div>
      {% endif %}

      <!-- Attractions Section -->
      {% if attractions %}
      <div class="section-header">
        <i class="fas fa-map-marked-alt"></i>
        <h2>Top Attractions in {{ destination }}</h2>
      </div>
      <div class="attractions-grid fade-in">
        {% for place in attractions %}
        <div class="attraction-card">
          <img src="{{ place.image_url }}" alt="{{ place.name }}" class="attraction-image" loading="lazy">
          <div class="attraction-content">
            <h3 class="attraction-title">{{ place.name }}</h3>
            {% if place.rating %}
            <div class="attraction-rating">
              <i class="fas fa-star"></i>
              <span>{{ place.rating }}/5</span>
              <span style="color: var(--text-muted);">({{ place.user_ratings_total }} reviews)</span>
            </div>
            {% endif %}
            <p class="attraction-address">{{ place.formatted_address }}</p>
          </div>
        </div>
        {% endfor %}
      </div>
      {% endif %}

      <!-- Itinerary Section -->
      {% if itinerary %}
      <div class="section-header">
        <i class="fas fa-route"></i>
        <h2>Your Personalized {{ num_days }}-Day Itinerary</h2>
        <a href="{% url 'export_pdf' %}" class="btn-primary" style="margin-left: auto; padding: 0.75rem 1.5rem; text-decoration: none;">
          <i class="fas fa-file-pdf"></i> Export to PDF
        </a>
      </div>
      <div class="itinerary-card fade-in" id="itineraryContent"></div>
      {% endif %}
    {% endif %}
  </div>

  <script>
    let world;
    
    function initGlobe() {
      try {
        world = Globe()
          (document.getElementById('globeViz'))
          .globeImageUrl('https://unpkg.com/three-globe/example/img/earth-night.jpg')
          .bumpImageUrl('https://unpkg.com/three-globe/example/img/earth-topology.png')
          .showAtmosphere(true)
          .atmosphereColor('#06b6d4')
          .atmosphereAltitude(0.15)
          .backgroundColor('rgba(0,0,0,0)')
          .polygonsData([])
          .pointOfView({ lat: 20, lng: 0, altitude: 2.5 });

        world.controls().autoRotate = true;
        world.controls().autoRotateSpeed = 0.5;

        fetch('https://unpkg.com/world-atlas/countries-110m.json')
          .then(res => res.json())
          .then(countries => {
            const countriesGeo = topojson.feature(countries, countries.objects.countries).features;
            world
              .polygonsData(countriesGeo)
              .polygonCapColor(() => 'rgba(6, 182, 212, 0.15)')
              .polygonSideColor(() => 'rgba(6, 182, 212, 0.05)')
              .polygonStrokeColor(() => '#06b6d4')
              .polygonAltitude(0.01);
          });

        {% if source_lat and source_lng and dest_lat and dest_lng %}
          plotRoute();
        {% endif %}
      } catch (error) {
        console.error('Globe error:', error);
      }
    }

    function plotRoute() {
      const source = {
        lat: {{ source_lat|default:"null" }},
        lng: {{ source_lng|default:"null" }},
        name: "{{ source|default:"" }}"
      };
      
      const dest = {
        lat: {{ dest_lat|default:"null" }},
        lng: {{ dest_lng|default:"null" }},
        name: "{{ destination|default:"" }}"
      };

      if (source.lat && source.lng && dest.lat && dest.lng && world) {
        world.controls().autoRotate = false;
        
        world.arcsData([{
          startLat: source.lat,
          startLng: source.lng,
          endLat: dest.lat,
          endLng: dest.lng
        }])
        .arcColor(() => ['#06b6d4', '#6366f1'])
        .arcDashLength(0.4)
        .arcDashGap(0.2)
        .arcDashAnimateTime(2000)
        .arcStroke(2.5)
        .arcAltitude(0.3);

        world
          .pointsData([source, dest])
          .pointLat(d => d.lat)
          .pointLng(d => d.lng)
          .pointAltitude(0.1)
          .pointRadius(0.4)
          .pointColor(() => '#10b981')
          .pointLabel(d => `<div style="background: rgba(0,0,0,0.9); padding: 10px 15px; border-radius: 8px; color: white; font-family: Poppins;">${d.name}</div>`);

        setTimeout(() => {
          const midLat = (source.lat + dest.lat) / 2;
          const midLng = (source.lng + dest.lng) / 2;
          world.pointOfView({ lat: midLat, lng: midLng, altitude: 1.8 }, 2000);
        }, 1000);
      }
    }

    initGlobe();

    // Format and display itinerary with beautiful styling
    {% if itinerary %}
    function formatItinerary() {
      const itineraryText = `{{ itinerary|escapejs }}`;
      const itineraryContainer = document.getElementById('itineraryContent');
      
      if (!itineraryContainer) return;
      
      let formattedHTML = '<div class="itinerary-intro"><h3><i class="fas fa-route"></i> Your Personalized Journey</h3><p>AI-crafted itinerary designed just for you</p></div>';
      
      const lines = itineraryText.split('\n');
      let currentDay = null;
      let currentTime = null;
      let dayNumber = 0;
      let activityCounter = 0;
      
      lines.forEach(line => {
        line = line.trim();
        if (!line) return;
        
        // Day headers (e.g., "Day 1:", "Day 2:")
        if (line.match(/^Day\s+\d+/i)) {
          // Close previous time block and day if exists
          if (currentTime) formattedHTML += '</div></div>';
          if (currentDay) formattedHTML += '</div>';
          
          dayNumber++;
          const match = line.match(/Day\s+(\d+)[:\s]*(.*)/i);
          const dayNum = match ? match[1] : dayNumber;
          const dayDesc = match && match[2] ? match[2] : '';
          
          formattedHTML += `
            <div class="itinerary-day">
              <div class="day-header">
                <div class="day-number">${dayNum}</div>
                <div class="day-title">
                  <h3>Day ${dayNum}</h3>
                  ${dayDesc ? `<div class="day-subtitle">${dayDesc}</div>` : ''}
                </div>
              </div>
          `;
          currentDay = dayNum;
          currentTime = null;
          activityCounter = 0;
        }
        // Time-based headers (Morning, Afternoon, Evening, etc.)
        else if (line.match(/^(Morning|Afternoon|Evening|Night|Breakfast|Lunch|Dinner):/i)) {
          // Close previous time block if exists
          if (currentTime) formattedHTML += '</div></div>';
          
          const match = line.match(/^([^:]+):(.*)/);
          if (match) {
            const timeIcon = {
              'Morning': 'fa-sun',
              'Afternoon': 'fa-cloud-sun',
              'Evening': 'fa-moon',
              'Night': 'fa-star',
              'Breakfast': 'fa-coffee',
              'Lunch': 'fa-utensils',
              'Dinner': 'fa-wine-glass-alt'
            };
            const time = match[1].trim();
            const content = match[2].trim();
            const icon = timeIcon[time] || 'fa-clock';
            
            formattedHTML += `
              <div class="time-block">
                <div class="time-header">
                  <div class="time-icon"><i class="fas ${icon}"></i></div>
                  <div class="time-title">${time}</div>
                </div>
                <div class="time-content">
            `;
            if (content) {
              formattedHTML += `<p>${content}</p>`;
            }
            currentTime = time;
            activityCounter = 0;
          }
        }
        // Bullet points (lines starting with * or -)
        else if (line.match(/^[\*\-‚Ä¢]\s+/)) {
          activityCounter++;
          const content = line.replace(/^[\*\-‚Ä¢]\s+/, '');
          formattedHTML += `
            <div class="activity-item">
              <div class="activity-bullet">${activityCounter}</div>
              <div class="activity-text">${content}</div>
            </div>
          `;
        }
        // Regular paragraphs
        else {
          if (currentTime) {
            formattedHTML += `<p>${line}</p>`;
          } else {
            formattedHTML += `<div style="padding: 1rem 1.5rem; color: var(--text-secondary);">${line}</div>`;
          }
        }
      });
      
      // Close any open tags
      if (currentTime) formattedHTML += '</div></div>';
      if (currentDay) formattedHTML += '</div>';
      
      itineraryContainer.innerHTML = formattedHTML;
    }
    
    formatItinerary();
    {% endif %}

    // Chatbot functionality
    const chatWidget = document.createElement('div');
    chatWidget.id = 'chat-widget';
    chatWidget.innerHTML = `
      <div id="chat-toggle" onclick="toggleChat()">
        <i class="fas fa-comments"></i>
        <span class="chat-badge">AI</span>
      </div>
      <div id="chat-container" style="display: none;">
        <div id="chat-header">
          <div>
            <i class="fas fa-robot"></i>
            <span>WanderMate Assistant</span>
          </div>
          <div>
            <button onclick="clearChat()" style="background: none; border: none; color: white; cursor: pointer; padding: 5px; margin-right: 10px;" title="Clear chat">
              <i class="fas fa-trash"></i>
            </button>
            <button onclick="toggleChat()" style="background: none; border: none; color: white; cursor: pointer; padding: 5px;">
              <i class="fas fa-times"></i>
            </button>
          </div>
        </div>
        <div id="chat-messages"></div>
        <div id="chat-input-container">
          <input type="text" id="chat-input" placeholder="Ask me anything about travel..." onkeypress="handleChatKeyPress(event)">
          <button onclick="sendMessage()" id="chat-send-btn">
            <i class="fas fa-paper-plane"></i>
          </button>
        </div>
      </div>
    `;
    document.body.appendChild(chatWidget);

    function toggleChat() {
      const container = document.getElementById('chat-container');
      const toggle = document.getElementById('chat-toggle');
      if (container.style.display === 'none') {
        container.style.display = 'flex';
        toggle.style.display = 'none';
        // Add welcome message if no messages
        const messagesDiv = document.getElementById('chat-messages');
        if (messagesDiv.children.length === 0) {
          addMessage('bot', 'Hello! üëã I\'m your travel assistant. Ask me anything about destinations, travel tips, or specific recommendations!');
        }
      } else {
        container.style.display = 'none';
        toggle.style.display = 'flex';
      }
    }

    function addMessage(type, text) {
      const messagesDiv = document.getElementById('chat-messages');
      const messageDiv = document.createElement('div');
      messageDiv.className = `chat-message ${type}-message`;
      messageDiv.innerHTML = `
        <div class="message-icon">
          <i class="fas fa-${type === 'user' ? 'user' : 'robot'}"></i>
        </div>
        <div class="message-text">${text.replace(/\n/g, '<br>')}</div>
      `;
      messagesDiv.appendChild(messageDiv);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }

    function handleChatKeyPress(event) {
      if (event.key === 'Enter') {
        sendMessage();
      }
    }

    async function sendMessage() {
      const input = document.getElementById('chat-input');
      const message = input.value.trim();
      if (!message) return;

      // Add user message
      addMessage('user', message);
      input.value = '';

      // Disable send button
      const sendBtn = document.getElementById('chat-send-btn');
      sendBtn.disabled = true;
      sendBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';

      try {
        const response = await fetch('/chatbot/', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ message: message })
        });

        const data = await response.json();
        
        if (data.success) {
          addMessage('bot', data.response);
        } else {
          addMessage('bot', 'Sorry, I encountered an error. Please try again.');
        }
      } catch (error) {
        console.error('Chat error:', error);
        addMessage('bot', 'Sorry, I\'m having trouble connecting. Please try again.');
      } finally {
        sendBtn.disabled = false;
        sendBtn.innerHTML = '<i class="fas fa-paper-plane"></i>';
      }
    }

    async function clearChat() {
      if (!confirm('Clear chat history?')) return;
      
      try {
        await fetch('/clear-chat/');
        document.getElementById('chat-messages').innerHTML = '';
        addMessage('bot', 'Chat cleared! How can I help you today?');
      } catch (error) {
        console.error('Clear chat error:', error);
      }
    }
  </script>

  <style>
    #chat-widget {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 10000;
    }

    #chat-toggle {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(99, 102, 241, 0.4);
      transition: all 0.3s;
      position: relative;
    }

    #chat-toggle:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 30px rgba(99, 102, 241, 0.6);
    }

    #chat-toggle i {
      color: white;
      font-size: 28px;
    }

    .chat-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: var(--success-color);
      color: white;
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 10px;
      font-weight: bold;
    }

    #chat-container {
      width: 380px;
      height: 550px;
      background: var(--dark-card);
      border-radius: 16px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      border: 1px solid var(--dark-border);
    }

    #chat-header {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      padding: 15px 20px;
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    #chat-header i {
      margin-right: 10px;
    }

    #chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .chat-message {
      display: flex;
      gap: 10px;
      align-items: flex-start;
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .user-message {
      flex-direction: row-reverse;
    }

    .message-icon {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .user-message .message-icon {
      background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
    }

    .bot-message .message-icon {
      background: linear-gradient(135deg, var(--success-color), var(--accent-color));
    }

    .message-icon i {
      color: white;
      font-size: 16px;
    }

    .message-text {
      background: rgba(255, 255, 255, 0.05);
      padding: 12px 16px;
      border-radius: 12px;
      max-width: 70%;
      line-height: 1.5;
      color: var(--text-primary);
    }

    .user-message .message-text {
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2));
      border: 1px solid rgba(99, 102, 241, 0.3);
    }

    #chat-input-container {
      padding: 15px;
      background: rgba(255, 255, 255, 0.02);
      border-top: 1px solid var(--dark-border);
      display: flex;
      gap: 10px;
    }

    #chat-input {
      flex: 1;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid var(--dark-border);
      border-radius: 25px;
      padding: 12px 20px;
      color: var(--text-primary);
      outline: none;
      transition: all 0.3s;
    }

    #chat-input:focus {
      border-color: var(--primary-color);
      background: rgba(255, 255, 255, 0.08);
    }

    #chat-send-btn {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      border: none;
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
    }

    #chat-send-btn:hover:not(:disabled) {
      transform: scale(1.1);
      box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
    }

    #chat-send-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    @media (max-width: 768px) {
      #chat-container {
        width: calc(100vw - 40px);
        height: calc(100vh - 100px);
        bottom: 80px;
        right: 20px;
      }
    }
  </style>
</body>
</html>
